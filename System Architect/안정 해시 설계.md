## 안정 해시
- 수평적 규모 확장성을 달성하기 위해 요청, 데이터를 서버에 균등하게 나눌 때 사용되는 기술
- 테이블 크기가 조정 될 때, 평균적으로 오직 k/n개의 키만 재배치
### 해시 키 재배치 문제
서버의 부하를 균등하게 나누는 보편적인 방법
	: serverIndex = hash(key) % N(서버 개수)
-> 서버 풀의 크기가 고정되었을 때, 데이터 분포가 균등할 때만 잘 작동
-> 서버가 추가, 삭제 되면 문제가 생김
## 해시 링
- 1차원의 해시 공간에서 시작점과 끝점을 이어 원형 형태로 간주


### 해시 서버
- 해시 함수(SAH-1) F를 사용해 서버 IP나 이름을 링 위에 대응시킴
### 해시 키
- 해시 함수(SAH-1) F로 Key들도 배치
### 서버 조회
- key의 위치를 기준으로 시계 방향으로 링을 탐색해 만나는 첫 서버가 해당 key가 저장되는 서버
### 서버 추가
- 서버 추가 시, 일부만 재배치하면 됨
	- 추가되는 서버의 이전 key들을 재배치
### 서버 제거
- 서버 제거 시, 서버 추가와 같이 일부만 재배치
## 기본 구현법의 두 가지 문제
```
기본 구현법

1. 서버와 키를 균등 분포 해시 함수를 사용해 해시 링에 재배치
2. 키의 위치에서 링을 시계 방향으로 탐색하다 만나는 최초 서버에 키 저장
```
1. 문제1) 서버 추가, 제거 시, 파티션의 크기를 균등하게 유지 불가능
	- 파티션: 인접한 서버 사이의 해시 공간
	- 어떤 서버는 굉장히 큰 파티션, 어떤 서버는 굉장히 작은 파티션
2. 문제2) 키의 균등 붙포를 달성하기 어려움
	 -> `가상 노드` 혹은 `복제 기법`으로 해결
- 가상 노드
	- 실제 노드, 서버를 가리키는 노드
	- 서버 1개를 배치 시킬 때, 서버1_1, 서버1_2, 서버1_3 과 같이 여러 개의 가상 노드로 해쉬 링에 배치
		- 가상 노드의 개수를 늘릴수록 키의 분포는 더 균등해짐
		- 보통 100~200개의 가상 노드를 사용하면, 표준 편차 값은 평균의 5~10%
		- 가상 노드가 늘어날수록, 저장 공간이 더 많이 필요